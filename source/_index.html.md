---
title: Vainu API

language_tabs: # must be one of https://git.io/vQNgJ
  - shell
  - python


toc_footers:
  - <a href='https://github.com/lord/slate'>Documentation Powered by Slate</a>

includes:
  - errors

search: true
---

# Introduction

Vainu API enables user to integrate Vainu’s prospect information and leads to their CRM or other services.



# Authentication

All parts of our API require authentication. We offer traditional HTTP basic access authentication and API key authentication.


Additionally, API Permissions must be enabled on the user account that is used to authenticate API requests.


Successful authentication allows access to corresponding resources as the used user credentials include.


## Basic Access authentication

Basic access authentication – commonly referred to as "basic auth" or HTTP authentication – uses the same login credentials as the web interface.


Simply add Authorization header to your request with a base64 encoded username and password.

*Example header:*

`Authorization: Basic <base64(username:password)>`.


## API Key authentication

> To authorize, use this code:


```python
import kittn

api = kittn.authorize('meowmeowmeow')
```

```shell
# With shell, you can just pass the correct header with each request
curl "api_endpoint_here"
  -H "Authorization: meowmeowmeow"
```

> Make sure to replace `meowmeowmeow` with your API key.


API keys are 64 character long hashes and they are used by including additional header named API-Key in API requests.


*Example header:*



`API-Key: c031d56b97320ab3c0690850d52d8059d998f4d7851b3c15e2586b5594745aee`


API keys are obtained through the web interface. In order to generate an API key in the first place, user must have API permissions enabled. Currently three simultaneously active keys per user are allowed.


To generate new API keys and list existing ones, go to Settings and open API Keys -tab. This page lists all active API keys generated by the user and allows fetching their corresponding API tokens.


Deleting keys (and thus preventing their further use) is also possible through this page. API keys also track some information about their use that is displayed on this page.


# customer_data

## Configuring Customer API integration
To allow more comprehensive integration features on our end – such as exporting prospect data directly from the Vainu UI and displaying customizable Customer Data – some configurable functionality is offered on Vainu.

These configurations can be accessed via Settings and the Integrations -tab. If the user has the correct permissions enabled, a section named Customer API Configuration is visible at the top of the page.

*The configurable values are:*

- `Endpoint name` -		A name that our interface should user to refer to your integration.

- `Endpoint URL` -		URL address (of your API endpoint) where data export requests should be sent. This endpoint should accept data in JSON formatted payloads. To see what the data contains, see the example below.

- `Create Customer Data entity` -	Generate and save Customer Data when executing exports via the interface, see Customer Data API part of this documentation. If this is toggled on each request will also contain the unique identifier of the newly created entity as a parameter named 'id'. This value works in conjunction with the next one, see details below.

- `Wait for API response` -	Define whether Vainu's end should wait a response from your API endpoint when executing export. This allows e.g. responding with a HTTP status code denoting the result of the request (201/200 or 400/500 for example). It's also possible to send the unique identifier on the object on your end in the response, as payload parameter 'unique_id'. Additionally, if Create Customer Data entity is toggled on but the request fails, the Customer Data will not be created and the already sent 'id' will be void.

- `Response timeout` -	How long to wait for customer API response before timeouting and assuming failure. Currently defaults to 3 seconds.

- `Activity Feed URL` -	URL address (of your API endpoint) from where Vainu's interface attempts to fetch activity data based on your Customer Data entity. Specify the location of your unique identifier in the URL with '{}' -marking. See details from the subheader Activity Feed.

- `Fetch activity feed` -	Toggle whether a request should be sent to the Activity Feed URL when opening a Prospect card in Vainu. The request is only sent if 1) Activity Feed URL is correctly defined 2) Customer Data entity exists and contains the unique_id and 3) Authentication is configured.

- `Base URL for links` -	Create direct links to your external service from prospect cards by using this url as the base and appending the entity's unique_id to the string. Specify the location of your unique_id in the URL with '{}' -marking.

- `Auth header` - Enter a header to be used when making requests to your service, to use for authentication.

### Exported data
Exporting data is possible through Vainu's UI when the endpoint is defined by pressing the corresponding export button on prospect cards. The data contains prospect, contact and/or lead information much in the same format as Public Prospect API displays it.


### Activity Feed

>   An example of of an activity feed response that is used to render information about the prospect on the prospect's page in Vainu (the example shows different kinds of valid objects):

```
    [
        {
            "timestamp": "2018-05-04T07:11:26.000Z",
            "id": "39acd9dc9a9db",
            "header": "Email",
            "text": "Description of the email",
            "type": "email",
            "hide_time": false,
            "user_email": "example@vainu.io",
            "icon": "email"
        },
        {
            "timestamp": "2018-05-04",
            "value": 2000,
            "probability_percent": 20,
            "currency": "EUR",
            "text": "description of opportunity",
            "type": "open",
            "id": "28acd9dc9a9dc",
            "user_email": "example@vainu.io"
        },
        {
            "timestamp": "2019-05-04",
            "hide_time": true,
            "text": "This is a note for prospect with unique_id: lk2lk23",
            "type": "note",
            "id": "11acd9dc9a911",
            "user_email": "example@vainu.io"
        },
        {
            "timestamp": 1497945068,
            "value": 2000,
            "header": "Victory",
            "text": "description of won deal",
            "type": "won",
            "id": "bbacd9dc9a9aa",
            "user_email": "example@vainu.io"
        },
        {
            "timestamp": 1497945061000,
            "value": 2000,
            "text": "description of lost deal",
            "type": "lost",
            "id": "ccacd9dc9a999",
            "user_email": "example@vainu.io"
        },
        {
            "timestamp": 1497945061000,
            "location": "Helsinki",
            "text": "description of meeting",
            "type": "meeting",
            "id": "ccacd9dc9a999",
            "user_email": "example@vainu.io"
        }
    ]
```

Activity Feed allows displaying custom data on Vainu's UI regarding the latest activity with a customer. This includes events like phone calls, meetings, e-mails, notes, lost/won deals, etc...

Activity Feed is fetched real time for always displaying up-to-date information and to eliminate the need for saving this possibly delicate data on our end.

In order to fetch and display activity data, the configurations should be correctly defined and your endpoint needs to return a json array of objects describing recent events relating to the prospect.

The Activity Feed URL is defined as follows:

Activity feed URL in your Vainu settings:

`https://your.external.service/Entity/{}/details`

When user opens a prospect card with associated Customer Data that has unique_id value of
123-abc, a request is sent to the parsed address

`https://your.external.service/Entity/123-abc/details`



#
###  A description of the properties of the objects:

- `id` - The unique id of the event. Required
- `timestamp` - Used to sort the events. Accepts ISO 8601 (string) and unix time (seconds/milliseconds integer). Required
- `type` - Possible values: email, call, activity, task, meeting, event, case, note, won, lost, open. Sets default values for other properties.
- `user_email` - Represents the owner of the event. Does not necessarily have to be an email address.
- `text` - The description of the event.
- `location` - Can be included as the location of the event. Is shown as @location
- `hide_time` - If true, hides the time from the ui. Does not effect sorting.
- `icon` - The name of the icon to be displayed next to the event. The default value depends on `type`. Possible values: task, meeting, call, e_meeting, email, deadline, lunch, won, lost, open, note, textnote, assignment
- `header` - The name of the type of event. The default value depends on `type`. To not display a header, do not include a header or type.

Used only if type is won, lost, or open:

- `value` - Value of opportunity.
- `currency` - Currency code. Is displayed as text in the ui.
- `probability_percent` - The probability of closing. If provided, is displayed as a part of the header.

---

## GET customer_data/

```python
import kittn

api = kittn.authorize('meowmeowmeow')
api.kittens.get()
```

```shell
curl "http://example.com/api/kittens"
  -H "Authorization: meowmeowmeow"
```

> Response

```json
[
  {
    "id": 1,
    "name": "Fluffums",
    "breed": "calico",
    "fluffiness": 6,
    "cuteness": 7
  },
  {
    "id": 2,
    "name": "Max",
    "breed": "unknown",
    "fluffiness": 5,
    "cuteness": 10
  }
]
```

This endpoint retrieves all kittens.

### HTTP Request

`GET http://example.com/api/kittens`

### Query Parameters

Parameter | Default | Description
--------- | ------- | -----------
include_cats | false | If set to true, the result will also include cats.
available | true | If set to false, the result will include kittens that have already been adopted.

<aside class="success">
Remember — a happy kitten is an authenticated kitten!
</aside>

## Get a Specific Kitten

```ruby
require 'kittn'

api = Kittn::APIClient.authorize!('meowmeowmeow')
api.kittens.get(2)
```

```python
import kittn

api = kittn.authorize('meowmeowmeow')
api.kittens.get(2)
```

```shell
curl "http://example.com/api/kittens/2"
  -H "Authorization: meowmeowmeow"
```

```javascript
const kittn = require('kittn');

let api = kittn.authorize('meowmeowmeow');
let max = api.kittens.get(2);
```

> The above command returns JSON structured like this:

```json
{
  "id": 2,
  "name": "Max",
  "breed": "unknown",
  "fluffiness": 5,
  "cuteness": 10
}
```

This endpoint retrieves a specific kitten.

<aside class="warning">Inside HTML code blocks like this one, you can't use Markdown, so use <code>&lt;code&gt;</code> blocks to denote code.</aside>

### HTTP Request

`GET http://example.com/kittens/<ID>`

### URL Parameters

Parameter | Description
--------- | -----------
ID | The ID of the kitten to retrieve

## Delete a Specific Kitten

```ruby
require 'kittn'

api = Kittn::APIClient.authorize!('meowmeowmeow')
api.kittens.delete(2)
```

```python
import kittn

api = kittn.authorize('meowmeowmeow')
api.kittens.delete(2)
```

```shell
curl "http://example.com/api/kittens/2"
  -X DELETE
  -H "Authorization: meowmeowmeow"
```

```javascript
const kittn = require('kittn');

let api = kittn.authorize('meowmeowmeow');
let max = api.kittens.delete(2);
```

> The above command returns JSON structured like this:

```json
{
  "id": 2,
  "deleted" : ":("
}
```

This endpoint deletes a specific kitten.

### HTTP Request

`DELETE http://example.com/kittens/<ID>`

### URL Parameters

Parameter | Description
--------- | -----------
ID | The ID of the kitten to delete
